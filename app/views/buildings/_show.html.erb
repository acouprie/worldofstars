<h3>Batiments :</h3>

<div id="flash">
  <%= render partial: "shared/flash_messages" %>
</div>

<% @planet.buildings.order(:id).each do |building| %>
  <% @building = building %>
  <div id="building_<%= @building.id %>">
    <%= raw(render('buildings/building_detail')) %>
  </div>
  <div id="building_btn_<%= @building.id %>" class="row">
    <div id="cancel_<%= @building.id %>" style="display: none">
      <div id="cancel_btn_<%= @building.id %>" class="col-md-6 cancel_btn" onclick="display_upgrade_btn('<%= @building.id %>')">
      <%= button_to "Annuler #{@building.name}",
        building_cancel_path(id: @building.id),
        method: :post,
        class: :cancel_building_button,
        remote: true
      %>
      </div>
      <span id="building_finish_at_<%= @building.id %>">
        Termine le <%= @building.finish_at %>
      </span>
      <div id="progress_bar_<%= @building.id %>" class="col-md-6">
        <%= render partial: "buildings/progress_bar", locals: {building: @building, :percent => @percent} %>
      </div>
    </div>
    <div id="upgrade_btn_<%= @building.id %>" class="col-md-12 upgrade_btn" onclick="display_cancel_btn('<%= @building.id %>', <%= !@building.upgrade_start.nil? %>)">
      <%= button_to "AmÃ©liorer #{@building.name}",
        building_upgrade_path(id: @building.id),
        method: :post,
        class: :upgrade_building_button,
        remote: true
      %>
    </div>
  </div>
<% end %>
