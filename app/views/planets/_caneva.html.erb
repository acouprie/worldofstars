
<canvas width = "620" height = "496" id = "planet_caneva"></canvas>

<script type = "text/javascript" charset = "utf-8">
  // Get a handle to the canvas object
  var canvas = document.getElementById('planet_caneva');
  // Get the image context for this canvas
  var context = canvas.getContext('2d');

  var image = new Image();
  image.src = "<%= image_url("planet_caneva_1.png") %>";
  var point_on = new Image();
  point_on.src = "<%= image_url("point_on.png") %>";
  var point_off = new Image();
  point_off.src = "<%= image_url("point_off.png") %>";

  var position_x = [500, 480, 500, 430, 440, 410, 420, 370, 380, 350, 360, 370, 390, 325, 345, 355];
  var position_y = [250, 260, 270, 195, 205, 205, 215, 255, 265, 265, 275, 380, 390, 390, 380, 360];

  image.onload = function() {
    context.drawImage(image,10,10);
    <% i = 0 %>
    <% @planet.buildings.each do |building| %>
    context.drawImage(point_off,position_x[<%= i %>],position_y[<%= i %>]);
    <% i += 1 %>
    <% end %>
  }
</script>
